import{j as e,M as x,r as f,O,u as o,a as R,b as h,N as P,W as C,H as F,c as M,d as S,e as T,C as A}from"./index-30efc1f2.js";function L({date:i,userName:s,avatarUrl:t,isPro:n,comment:l,rating:r}){const c=new Date(i);return e.jsxs("li",{className:"reviews__item",children:[e.jsxs("div",{className:"reviews__user user",children:[e.jsx("div",{className:"reviews__avatar-wrapper user__avatar-wrapper",children:e.jsx("img",{className:"reviews__avatar user__avatar",src:t,width:"54",height:"54",alt:"Reviews avatar"})}),e.jsx("span",{className:"reviews__user-name",children:s}),n&&e.jsx("span",{className:"offer__user-status",children:"Pro"})]}),e.jsxs("div",{className:"reviews__info",children:[e.jsx("div",{className:"reviews__rating rating",children:e.jsxs("div",{className:"reviews__stars rating__stars",children:[e.jsx("span",{style:{width:`${r*(100/x)}%`}}),e.jsx("span",{className:"visually-hidden",children:"Rating"})]})}),e.jsx("p",{className:"reviews__text",children:l}),e.jsx("time",{className:"reviews__time",dateTime:c.toISOString().slice(0,10),children:c.toLocaleDateString("en-US",{year:"numeric",month:"long"})})]})]})}function E({comments:i}){return e.jsx("ul",{className:"reviews__list",children:i.map(s=>e.jsx(L,{date:s.date,userName:s.user.name,avatarUrl:s.user.avatarUrl,isPro:s.user.isPro,comment:s.comment,rating:s.rating},s.id))})}function H(){const[i,s]=f.useState({review:"",rating:""}),t=l=>{const{name:r,value:c}=l.target;s({...i,[r]:c})},n=()=>O.map(({title:l,rating:r})=>e.jsxs(f.Fragment,{children:[e.jsx("input",{className:"form__rating-input visually-hidden",id:`${r}-stars`,name:"rating",value:r,type:"radio",onChange:t}),e.jsx("label",{className:"reviews__rating-label form__rating-label",htmlFor:`${r}-stars`,title:l,children:e.jsx("svg",{className:"form__star-image",width:"37",height:"33",children:e.jsx("use",{xlinkHref:"#icon-star"})})})]},r));return e.jsxs("form",{className:"reviews__form form",action:"#",method:"post",children:[e.jsx("label",{className:"reviews__label form__label",htmlFor:"review",children:"Your review"}),e.jsx("div",{className:"reviews__rating-form form__rating",children:n()}),e.jsx("textarea",{className:"reviews__textarea form__textarea",id:"review",name:"review",value:i.review,placeholder:"Tell how was your stay, what you like and what can be improved",onChange:t}),e.jsxs("div",{className:"reviews__button-wrapper",children:[e.jsxs("p",{className:"reviews__help",children:["To submit review please make sure to set  ",e.jsx("span",{className:"reviews__star",children:"rating"})," and describe your stay with at least  ",e.jsx("b",{className:"reviews__text-amount",children:"50 characters"}),"."]}),e.jsx("button",{className:"reviews__submit form__submit button",type:"submit",disabled:!0,children:"Submit"})]})]})}function D(){const i=o(a=>a.offers),s=o(a=>a.fullOffer),t=o(a=>a.offersNearby),n=o(a=>a.comments),l=()=>[...i.filter(a=>a.id===(s==null?void 0:s.id)),...t].slice(0,h),r=n.slice(0,R),c=t.slice(0,h-1),v=l();if(!(s==null?void 0:s.id))return e.jsx(P,{to:"*"});const{title:j,type:d,isPremium:u,isFavorite:N,rating:m,description:p,price:w,bedrooms:g,goods:b,host:_,images:y,maxAdults:k}=s;return e.jsxs("div",{className:"page",children:[e.jsx(C,{children:e.jsx("title",{children:"6 cities | Предложения"})}),e.jsx(F,{}),e.jsxs("main",{className:"page__main page__main--offer",children:[e.jsxs("section",{className:"offer",children:[e.jsx("div",{className:"offer__gallery-container container",children:e.jsx("div",{className:"offer__gallery",children:y.map(a=>e.jsx("div",{className:"offer__image-wrapper",children:e.jsx("img",{className:"offer__image",src:a,alt:"Photo studio"})},a))})}),e.jsx("div",{className:"offer__container container",children:e.jsxs("div",{className:"offer__wrapper",children:[u&&e.jsx("div",{className:"offer__mark",children:e.jsx("span",{children:"Premium"})}),e.jsxs("div",{className:"offer__name-wrapper",children:[e.jsx("h1",{className:"offer__name",children:j}),e.jsxs("button",{className:M("offer__bookmark-button button",N&&"offer__bookmark-button--active"),type:"button",children:[e.jsx("svg",{className:"offer__bookmark-icon",width:"31",height:"33",children:e.jsx("use",{xlinkHref:"#icon-bookmark"})}),e.jsx("span",{className:"visually-hidden",children:"To bookmarks"})]})]}),e.jsxs("div",{className:"offer__rating rating",children:[e.jsxs("div",{className:"offer__stars rating__stars",children:[e.jsx("span",{style:{width:`${m*(100/x)}%`}}),e.jsx("span",{className:"visually-hidden",children:"Rating"})]}),e.jsx("span",{className:"offer__rating-value rating__value",children:m})]}),e.jsxs("ul",{className:"offer__features",children:[e.jsx("li",{className:"offer__feature offer__feature--entire",children:d.charAt(0).toUpperCase()+d.slice(1)}),e.jsxs("li",{className:"offer__feature offer__feature--bedrooms",children:[g," Bedrooms"]}),e.jsxs("li",{className:"offer__feature offer__feature--adults",children:["Max ",k," adults"]})]}),e.jsxs("div",{className:"offer__price",children:[e.jsxs("b",{className:"offer__price-value",children:["€",w]}),e.jsx("span",{className:"offer__price-text",children:" night"})]}),e.jsxs("div",{className:"offer__inside",children:[e.jsx("h2",{className:"offer__inside-title",children:"What's inside"}),e.jsx("ul",{className:"offer__inside-list",children:b.map(a=>e.jsx("li",{className:"offer__inside-item",children:a},a))})]}),e.jsxs("div",{className:"offer__host",children:[e.jsx("h2",{className:"offer__host-title",children:"Meet the host"}),e.jsxs("div",{className:"offer__host-user user",children:[e.jsx("div",{className:"offer__avatar-wrapper offer__avatar-wrapper--pro user__avatar-wrapper",children:e.jsx("img",{className:"offer__avatar user__avatar",src:_.avatarUrl,width:"74",height:"74",alt:"Host avatar"})}),e.jsx("span",{className:"offer__user-name",children:_.name}),_.isPro&&e.jsx("span",{className:"offer__user-status",children:"Pro"})]}),e.jsx("div",{className:"offer__description",children:e.jsx("p",{className:"offer__text",children:p})})]}),e.jsxs("section",{className:"offer__reviews reviews",children:[e.jsxs("h2",{className:"reviews__title",children:["Reviews · ",e.jsx("span",{className:"reviews__amount",children:n.length})]}),e.jsx(E,{comments:r}),e.jsx(H,{})]})]})}),e.jsx("section",{className:"offer__map map",children:e.jsx(S,{startPoint:s.city,points:v})})]}),e.jsx("div",{className:"container",children:e.jsxs("section",{className:"near-places places",children:[e.jsx("h2",{className:"near-places__title",children:"Other places in the neighbourhood"}),e.jsx(T,{offers:c,cardClassName:A.OfferPageCardType})]})})]})]})}export{D as default};
